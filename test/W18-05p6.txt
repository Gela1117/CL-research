Proceedings of the Thirteenth Workshop on Innovative Use of NLP for Building Educational Applications, pages 154–158

New Orleans, Louisiana, June 5, 2018. c(cid:13)2018 Association for Computational Linguistics

154

ChengyuClozeTestZhiyingJiang,BoliangZhang,LifuHuangandHengJiComputerScienceDepartmentRensselaerPolytechnicInstitute{jiangz6,zhangb8,huangl7,jih}@rpi.eduAbstractWepresentaneuralrecommendationmodelforChengyu,whichisaspecialtypeofChi-neseidiom.Givenaquery,whichisasentencewithanemptyslotwheretheChengyuistakenout,ourmodelwillrecommendtheChengyucandidatethatbestﬁtstheslotcontext.ThemainchallengeliesinthattheliteralmeaningofaChengyuisusuallyverydifferentfromitsﬁgurativemeaning.WeproposeaneuralapproachtoincorporatethedeﬁnitionofeachChengyuasbackgroundknowledge.Experi-mentsonbothChengyuclozetestandcoher-encecheckingincollegeentranceexamsshowthatoursystemachieves89.5%accuracyonclozetestandoutperformshumanexpertswhoattendedcompetitiveuniversitiesinChina.Wewillmakeallofourdatasetsandresourcespubliclyavailableasanewbenchmarkforre-searchpurposes1.1IntroductionChengyu(“成语”,literaltranslation:“formphrases”)isaspecialtypeofChineseidiom,andrepresentsoneofthemostbeautiful,fascinat-inganduniqueaspectsoftheChineselanguage.96%Chengyusconsistoffourcharacterseach.Chengyusweremainlycreatedfromancientsto-ries,literatureandsayingswhichcanbetracedbacktothousandsofyearsago.Someexam-plesareshowninTable1.Morethan7,000ChengyusarestillwidelyusedinthemodernChinese,Japanese,KoreanandVietnameselan-guages.Likeidiomsinotherlanguages,us-ingChengyuappropriatelymakescommunicationmorecompellingandengagingbecausetheyin-troducepowerfulimageryandﬁgurativemeaningsthatdifferfromtheirliteralmeanings.WhenlearningChinesephrases,Chengyusarealwaysthemostdifﬁculttounderstandandmem-1https://github.com/bazingagin/chengyudataorize.Second-languagelearnersgenerallyhavealove-haterelationwithChengyuandtendtoavoidit.AtypicalwaytomeasureaChineselearner’sChengyuknowledgeis“ClozeTest”,inwhichthelearnerisaskedtosupplythebestChengyuthathasbeenremovedfromasentence.It’sconsid-eredasoneofthemostdifﬁcultproblemsinChi-nesecollegeentrancelanguageandliteratureex-ams,andhasbeenthefocusofseveralTVtal-entshowsinChinasuchastheChineseIdiomCongressbyCCTV.ThismotivatedustodeveloptheﬁrstChengyurecommendationsystemtoas-sistChineselearners.Givenacontextsentence(“query”)withaChengyuremoved,thesystemwillautomaticallyrecommendthebestChengyutoﬁllintheblank.ThefourcharactersineachChengyuareof-tenunintelligiblewithoutunderstandingtheback-groundstory.Forexample,“沉鱼落雁(literaltranslation:sinkﬁshfallswallow)”and“闭月羞花(literaltranslation:hidemoonshameﬂower)”wereusedtosummarizefourstoriesofthetopfourbeautiesinancientChina:XiShi,WangZhao-jun,DiaoChanandYangYuhuan.Theywerebeingsobeautifulthatﬁshsank,birdsfellfromthesky,themoonhid,andﬂowerswereshamed.Asaresult,wecannotcomposethemeaningofaChengyuonlybasedonitsfourcharacters.More-over,eachChengyuishighlysuccinct,compactandsynthetic.Forexample,“一日三秋(literaltranslation:onedaythreeautums)”meansgreatlymissingsomeonesothatonedayfeelsaslongasthreeyears.However,itskeymeaning“missing”isnotinthisChengyu.Toaddressthesechallenges,wecreateanewChengyuClozeTestbenchmark,whichconsistsof108,987querysentencesand7,395targetChengyus.EachChengyuisassociatedwithadef-inition,whichdescribesitsgeneralmeaningsandscenarioswhereitoccurs.Thenwedevelopan155

OriginQueryRecommended Chengyu and Its DefinitionHistorical Story⽂学接受史上经常有这样的现象，某些作品在它的那个时代曾经风⾏⼀时，_____。 Throughout history some literary works were extremely popular, so much so that ____.洛阳纸贵 (Luoyang's paper became expensive) 原指西晋都城洛阳之纸，因⼤家争相传抄左思的作品《三都赋》，以⾄⼀时供不应求，货缺⽽贵。⽐喻著作有价值，流传⼴。 During the Western Jin Dynasty, people kept copying and propagating Zuosi's work “San Du Fu", which caused the supply of paper falling  short of demand. Now a metaphor to describe that some great work is valuable and widely disseminated.Ancient Chinese Literature三年的⾼中⽣活如____⼀般转瞬⽽逝。 The three years of high school life was like ____, time takes wings.⽩驹过隙 (time passes quickly like a white pony's shadow across a crevice) 《庄⼦》：“⼈⽣天地之间，若⽩驹之过隙，忽然⽽已。” Chuang Tzu said ``Human life between heaven and earth is like the white pony seen through a crack in the wall, it's just a moment.Fable Proverb Saying____，各显神通，预⽰着省楹联艺术家协会成⽴后必将涌现出成千上万不计其数的佳联妙对。 ____, each with their own special powers. This indicates that thousands of great couplets will emerge and decorate Shanjin beautifully. ⼋仙过海 (Eight immortals cross the sea) 相传⼋仙过海时不⽤⾈船，各有⼀套法术，后⽐喻各⾃拿出本领或办法，互相竞赛。 It's said that eight immortals crossed the sea without boats because each of them had special power. Now it's used to describe using one's unique skill to compete.Foreign Literature我们喜欢⽤经济去控制⼀个国家的命脉,⽤信仰去控制⼀个种族,⽤利益让别⼈为我们____。 We like to use economy to control a country's faith, use belief to control a race and use profit to control others so they can ____ for us.⽕中取栗 (pull chestnuts from the embers) 出⾃⼗七世纪法国寓⾔诗⼈拉·封丹的寓⾔《猴⼦与猫》。⽐喻受⼈利⽤去冒险，吃了苦头却得不到⼀点好处。 From the 17 century French fabulist Jean de la Fontaine's "The Monkey and the Cat". Bertrand the monkey persuades Raton the cat to pull chestnuts from the embers amongst which they are roasting, promising him a share. As the cat scoops them from the fire one by one, burning his paw in the process, the monkey gobbles them up. It's used to describe a person used unwittingly or unwillingly by another to accomplish the other's own purpose with his own risk but gets nothing.Metaphor这篇⼩说情节完整⽣动，⼈物性格鲜明，但____，个别语句还⽋推敲。 This novel includes a complete and vivid plot, and the characters have distinct personalities. But it's like ____- some sentences need to be further polished.⽩璧微瑕 (white jade with a little blemish) 洁⽩的⽟上有些⼩斑点。⽐喻很好的⼈或物有些⼩缺点，美中不⾜。 A flaw in a white jade. It's a metaphor for a good person or a good thing with a little defect.Table1:ChengyuExamplesattentiveneuralnetworkarchitecturetoselectthemostappropriateChengyutoﬁtintheslotcontextofeachquery.WeﬁrstencodequerysentenceandChengyudeﬁnitionsusingabi-directionallongshort-termmemory(Bi-LSTM)network(Hochre-iterandSchmidhuber,1997).Tobettercapturethecorrelationbetweenthequeryandthedeﬁni-tion,weapplyasoftattentiontoassignaweighttoeachwordinthequerysentence,andpredictamatchingscoreforeachcandidateChengyu.OursystemsigniﬁcantlyoutperformshumanlearnerswhoattendedtopuniversitiesinChina.2RelatedWorkOurChengyuclozetesttaskissimilartoread-ingcomprehension(Hermannetal.,2015;Cuietal.,2016;Chenetal.,2016;Kadlecetal.,2016;Seoetal.,2016).However,it’smorechalleng-ingbecausethecontextincludesasentencein-steadofaparagraph,theChengyuphraseitselfdoesnotconveyitsﬁgurativemeaning,andtherearemanymorecandidateanswers.VeryfewNat-uralLanguageProcessingtechniqueshavebeenappliedtounderstandorrecommendChengyu.Chung(2009)studiedasubsetofChineseﬁg-urativelanguage,focusingonChineseﬁveel-ementsandbodypartterms.LimitedeffortshaveusedChengyudictionariestoexpandChineseemotionlexicon(Xuetal.,2010)andimproveChinesewordsegmentation(ChanandChong,2008;SunandXu,2011;WangandXu,2017).Chengyusdifferfrommetaphorsinotherlan-guages(Tsvetkovetal.,2014;Shutova,2010)be-causetheydonotfollowthegrammaticalstructureandsyntaxofthemodernChinese.3ApproachFigure1showstheoverallarchitectureofourap-proach.Foraqueryandthedeﬁnitionofacandi-dateChengyu,weﬁrstapplyawordsegmentationtooljieba2tosegmentqueryanddeﬁnitionintowords,andapplyaBi-LSTMnetworktoencodeeachwordwithacontextualembedding.InordertobettercapturethecorrelationbetweenaqueryandaChengyu,wefurthercomparetherepresen-tationsoftheChengyudeﬁnitionandthecontex-tualembeddingofeachwordinthequery,and2https://github.com/fxsjy/jieba156

Figure1:ArchitectureOverviewtaketheweightedsumofthequerywordcontex-tualembeddingsasinputtoalinearfunctiontodeterminetheprobabilityscoreofthecandidateChengyu.Nextweshowtheapproachdetails.EncodingGivenaqueryqandaChenyudeﬁ-nitiondjfromthetargetChengyudatabaseD={d1,d2,...,dm},weapplytwoBi-LSTMnet-workstoencodethemseparately.EachBi-LSTMnetworkleverageslongdistancefeaturesfromthewholesentencetocapturethecontextinformationbyusingamemorycell(HochreiterandSchmid-huber,1997).Eachwordinqanddjisassignedacontextualembedding.AttentionTobettercapturethecorrelationbe-tweenaqueryandeachChengyudeﬁnition,weuseanattentionmechanism(Bahdanauetal.,2014;Sutskeveretal.,2014)tocomparethese-manticrelatednessofeachwordinthequerysen-tencewiththemeaningofeachChengyudeﬁni-tion.GiventhehiddenstatesH=h0,h1,...,hnoftheBi-LSTMencodingthequerysentence,wherehidenotestheconcatenationofthehiddenstatesofwordwiwithforwardandbackwardLSTMs,theattentionlayersumoverhiwithlearnableweightα:R=Pni=1αi·hi,whereRistheweightedsumvectorrepresentationofthequery.αiisalearnableweightwhichiscomputedbyαi=exp(ei)Pni=1exp(ei)andei=dT·Wα·hi,whereWαisaparametertocapturetherelevancebetweenaqueryandadeﬁnitionﬂexibly(Chenetal.,2016).dTisthelasthiddenhiddenstateoftheBi-LSTMencodingthedeﬁnition.TrainingWiththeweightedsumvectorrepre-sentationofthequeryR,weapplyasoftmaxfunc-tiontocomputetheprobabilityofeachcandidateChengyudjtobeﬁlledintotheslot.oi=WTβRpi=exp(oi)Pmj=1exp(oj),whereWβmapstheﬁnalrepresentationofthequeryintoRm,andmisthenumberofclasses.Thenweoptimizetheloglikelihood:L=Pmj=1yjlog(pj),whereyjis0or1depend-ingonifthetruthisChengyudjornot.PredictionForprediction,wetakeaquerywitheachChengyudeﬁnition(q,dj),1≤j≤masin-put,andpredictaprobabilitymatrixM∈Rm×m,wheremisthenumberofcandidates.Forexam-ple,achoose-one-from-fourtaskwillhavem=4.TheﬁnalpredictedChengyudjisselectedbyargmax(M[:,j]),1≤j≤m.4Experiments4.1DataandSettingWecrawled108,987sentencesincluding7,395uniqueidiomsfromhttp://zaojv.com,andthedeﬁnitionsoftheseidiomsfromhttp://cy.5156edu.com.Trainingandtestsetcon-tain108,432and555sentences,and7,071and508Chengyusrespectively.WeusethewholeChengyudatasettotrainwordembeddings.Weperformtwotests:(1)clozetest:foreachsen-tenceinthetestset,wetakeouttheground-truthChengyu,andletthesystemselectaChengyu157

TYPEQUERYSYSTEMGROUND TRUTHANALYSISIncorporating  Definition这事已势不可遏，任何想阻挡他的⼈都如____，简直是不⾃量⼒。 This event is unstoppable, anyone who tries to stop it will be like ____, almost not recognizing his/her own limited power.蚍蜉撼树 an ant shaking a tree, to describe one fails to recognize one’s limited power蚍蜉撼树 an ant shaking a tree, to describe one fails to recognize one’s limited powerThe definition significantly enriches the semantic meanings of Chengyu itself. 蚍蜉撼树(an ant shaking a tree) is a metaphor to describe ⾃不量⼒(fail to recognize one's own limited power).Attention Mechanism刘备思贤若渴，三请诸葛亮的故事在我国可是____，⼈⼈皆知的佳话。 It's ____ well known by everyone in our country that Liu Bei was eager to recruit talents and invited Zhu Geliang three times.家喻户晓 well known by every family家喻户晓 well known by every familyBy incorporating the attention mechanism, our approach can better capture the correlations between query context and Chengyu definition. our approach successfully selects 家喻户晓 (well known by every family) to fill in the slot since it shares similar semantic meanings with query context word 知 (known).World Knowledge村上春树____，29岁才写他的第⼀部作品。 Haruki Murakami ____, he was already at age 29 when he wrote his first works.画龙点睛 bring the painted dragon to life by putting in the pupils of its eyes⼤器晚成 takes a long time to make a great instrumentWe need to know “age 29” is relatively late to produce the first works for a writer.Discourse Coherence⼈们⾯临灾难，不得不____，离开他们⾃⼰的村落。 When facing disasters, people had to ____ and leave their own villages.逍遥法外 at large背井离乡 leave one’s hometownOur system focused on the shared meaning  of escape/leave while ignored this Chengyu has a specific object “the arm of the law”.Sentiment Analysis多少⼈认为⼀个作家不仅能妙笔⽣花，也是____的。 Many people think that a writer can not only write like an angel but also ____.⼤⾔不惭 brag shamelessly⼜若悬河 speak eloquently⼤⾔不惭 (brag shamelessly) expresses very negative sentiment while ⼜若悬河 (speak eloquently) includes positive sentiment.Negation Detection你在他⾯前说那些话，实在是班门弄斧，不知____。 The words you said in front of him were really like showing off axe in front of Lu Ban, without knowing ____. 孤陋寡闻 with very limited knowledge and scanty information天⾼地厚 high as heaven, deep as earthOur system did not detect negation clues and thus failed to select the right Chengyu antonyms.Grammatical Structure写⽂章先要构思好，不要下笔千⾔，____。 We should think about the plot carefully before write an article, don't write down thousands of words, ____.词不达意 the words fail to express the meaning离题万⾥  get away from the title ten thousands of milesWhen multiple Chengyus appear in the same query sentence, they tend to follow the same grammatical structure.Rhythm爱是⼈性的美的⼒量，爱是爱你年少时的____，更爱你年⽼时⽩发苍苍。 Love is the beauty of humanity. To love is to love your youthful vigor like ____ as well as your gray hair.意⽓风发 high-spirited and vigorous桃之夭夭 the peach trees in full blossomMultiple chengyus tend to appear in rhythmical form. In this example, “苍苍”(pronunciation: Cāng Cāng) and “夭夭”(Yāo Yāo) are both reduplication with similar vowel pronunciations.CorrectRemaining ChallengesTable2:DetailedAnalysisonCorrectExamplesandRemainingChallengesfromfourcandidatesconsistingoftheground-truthandthreeotherrandomlyselectedonestoﬁllintheslot.(2)coherencecheckingincollegeen-tranceexam:wecollected14problemsetsfrom(1998,2000)Chinacollegeentranceexam,whereeachproblemsetconsistsoffoursentencesinclud-ingChengyus.Weletthesystemselectthesen-tencethatcontainsthemostappropriateChengyuthatﬁtsintothecontextinacoherentway.Forcomparisonwithhuman,weaskedtwoChinesenativespeakers(notsystemdevelopers)whoat-tendedtopuniversitiesinChinatoperformthesametests.4.2ResultsandAnalysisClozeTestCoherenceCheckinginCollegeEntranceExamHuman70%42.3%System89.5%35.7%Table3:SystemandHumanAccuracyComparisonTable3showsourapproachachievescompara-bleperformanceashumanexperts.For18%ofoursystemrecommendedChengyuswhichdon’texactlymatchthegroundtruth,theyarealsoac-ceptablechoicesforthegivenquerycontexts.158

Forexample,oursystemoutput“白驹过隙(timepassesquicklylikeawhitepony’sshadowacrossacrevice)”andgroundtruth“光阴似箭(timeﬂies)”arenearsynonyms.Table2showssomecorrectexamplesandtheremainingchallengesthatre-quirecapabilitiesbeyondlexicalsemantics.5ConclusionsandFutureWorkWecreatedanewbenchmarkdatasetforanewtaskofChengyuclozetest.WealsoproposedaneuralmodelwhichleveragesthedeﬁnitionsofChengyuasbackgroundknowledgeandoutper-formshumanexperts.InthefuturewewillexplorecollectiveinferencetorankmultipleChengyusinthesamediscoursesimultaneously,andincorpo-ratericherlinguisticcluesbasedonstructuresandrhythms.AcknowledgmentsThisworkwassupportedbytheU.S.DARPALORELEIProgramNo.HR0011-15-C-0115andU.S.ARLNS-CTANo.W911NF-09-2-0053.Theviewsandconclusionscontainedinthisdocumentarethoseoftheauthorsandshouldnotbeinter-pretedasrepresentingtheofﬁcialpolicies,eitherexpressedorimplied,oftheU.S.Government.TheU.S.GovernmentisauthorizedtoreproduceanddistributereprintsforGovernmentpurposesnotwithstandinganycopyrightnotationhereon.ReferencesDzmitryBahdanau,KyunghyunCho,andYoshuaBen-gio.2014.Neuralmachinetranslationbyjointlylearningtoalignandtranslate.arXivpreprintarXiv:1409.0473.SamuelW.K.ChanandMickeyW.C.Chong.2008.Anagent-basedapproachtochinesewordsegmentation.InProceedingsoftheSixthSIGHANWorkshoponChineseLanguageProcessing.DanqiChen,JasonBolton,andChristopherDMan-ning.2016.Athoroughexaminationofthecnn/dailymailreadingcomprehensiontask.arXivpreprintarXiv:1606.02858.Siaw-FongChung.2009.Acorpus-basedstudyonﬁg-urativelanguagethroughthechineseﬁveelementsandbodypartterms.InProceedingsofComputa-tionalLinguisticsandChineseLanguageProcess-ing.YimingCui,TingLiu,ZhipengChen,ShijinWang,andGuopingHu.2016.Consensusattention-basedneuralnetworksforchinesereadingcomprehension.arXivpreprintarXiv:1607.02250.KarlMoritzHermann,TomasKocisky,EdwardGrefenstette,LasseEspeholt,WillKay,MustafaSu-leyman,andPhilBlunsom.2015.Teachingma-chinestoreadandcomprehend.InAdvancesinNeu-ralInformationProcessingSystems,pages1693–1701.SeppHochreiterandJ¨urgenSchmidhuber.1997.Longshort-termmemory.Neuralcomputation,9(8):1735–1780.RudolfKadlec,MartinSchmid,OndrejBajgar,andJanKleindienst.2016.Textunderstandingwiththeattentionsumreadernetwork.arXivpreprintarXiv:1603.01547.MinjoonSeo,AniruddhaKembhavi,AliFarhadi,andHannanehHajishirzi.2016.Bidirectionalattentionﬂowformachinecomprehension.arXivpreprintarXiv:1611.01603.EkaterinaShutova.2010.Modelsofmetaphorinnlp.InProceedingsofthe48thannualmeetingoftheas-sociationforcomputationallinguistics,pages688–697.AssociationforComputationalLinguistics.WeiweiSunandJiaXu.2011.Enhancingchinesewordsegmentationusingunlabeleddata.InProceedingsofthe2011ConferenceonEmpiricalMethodsinNaturalLanguageProcessing.IlyaSutskever,OriolVinyals,andQuocVLe.2014.Sequencetosequencelearningwithneuralnet-works.InAdvancesinneuralinformationprocess-ingsystems,pages3104–3112.YuliaTsvetkov,LeonidBoytsov,AnatoleGershman,EricNyberg,andChrisDyer.2014.Metaphordetec-tionwithcross-lingualmodeltransfer.InProceed-ingsofthe52ndAnnualMeetingoftheAssociationforComputationalLinguistics(Volume1:LongPa-pers),volume1,pages248–258.ChunqiWangandBoXu.2017.Convolutionalneu-ralnetworkwithwordembeddingsforchinesewordsegmentation.InProceedingsoftheThe8thIn-ternationalJointConferenceonNaturalLanguageProcessing.GeXu,XinfanMeng,andHoufengWang.2010.Buildchineseemotionlexiconsusingagraph-basedal-gorithmandmultipleresources.InProceedingsofthe23rdInternationalConferenceonComputa-tionalLinguistics(COLING2010).